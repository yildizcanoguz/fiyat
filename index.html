<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DQE PRO MASTER</title>
    <style>
        /* MODERN THEME */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; margin: 0; padding: 15px; background-color: #f4f6f8; color: #333; min-height: 100vh; display: flex; flex-direction: column; align-items: center; }
        .container { width: 100%; max-width: 600px; background: #ffffff; padding: 20px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); border: 1px solid #e1e4e8; }

        /* TABS */
        .tabs { display: flex; justify-content: space-between; margin-bottom: 20px; background: #f0f2f5; padding: 4px; border-radius: 12px; gap: 5px; }
        .tab-btn { flex: 1; padding: 10px 0; border: none; background: transparent; cursor: pointer; font-weight: 700; color: #7f8c8d; border-radius: 8px; font-size: 11px; text-align: center; line-height: 1.2; }
        .tab-btn.active { background-color: #3498db; color: white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        h2 { text-align: center; color: #2c3e50; margin-bottom: 15px; font-weight: 800; font-size: 18px; text-transform: uppercase; }
        label { display: block; margin-top: 15px; margin-bottom: 8px; font-weight: 600; font-size: 0.9em; color: #555; }
        
        /* INPUTS */
        .search-wrapper { position: relative; width: 100%; }
        input { width: 100%; padding: 14px 40px 14px 14px; border: 1px solid #d1d9e6; border-radius: 12px; font-size: 15px; background: #f9fbfd; color: #2c3e50; font-weight: 500; transition: all 0.3s; }
        input:focus { outline: none; border-color: #3498db; background: #fff; box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.15); }
        .arrow-btn { position: absolute; right: 0; top: 0; bottom: 0; width: 50px; display: flex; align-items: center; justify-content: center; cursor: pointer; color: #3498db; font-size: 14px; }
        
        /* RESULTS LIST */
        .custom-results { position: absolute; top: 110%; left: 0; right: 0; background: white; border: 1px solid #eee; border-radius: 12px; max-height: 300px; overflow-y: auto; z-index: 1000; display: none; box-shadow: 0 15px 40px rgba(0,0,0,0.15); }
        .result-item { padding: 12px 16px; border-bottom: 1px solid #f4f6f8; cursor: pointer; font-size: 13px; line-height: 1.4; }
        .result-item:last-child { border-bottom: none; }
        .result-item:hover, .result-item:active { background-color: #eaf6ff; color: #007aff; }
        .result-item strong { display: block; color: #2c3e50; font-size: 14px; margin-bottom: 2px; }
        .result-item span { color: #555; font-size: 12px; font-style: italic; }
        
        .tag { display: inline-block; padding: 2px 6px; border-radius: 4px; font-size: 9px; font-weight: bold; margin-bottom: 4px; color: white;}
        .tag-route { background: #3498db; } .tag-oa { background: #27ae60; } .tag-tunnel { background: #e67e22; }

        /* CARDS */
        .selected-card { background: #f0f7ff; border: 1px solid #cce4ff; padding: 20px; border-radius: 12px; margin-top: 25px; display: none; }
        .selected-card h3 { margin: 0; color: #0056b3; font-size: 16px; display: flex; justify-content: space-between; }
        .badge-unit { background: #3498db; color: white; padding: 4px 10px; border-radius: 6px; font-size: 12px; }
        .price-tag { margin-top:12px; font-size:14px; color: #333; background: #fff; padding: 12px; border-radius: 8px; border: 1px solid #e1e4e8; }

        .result-box { margin-top: 25px; background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); color: white; border-radius: 16px; padding: 25px; display: none; box-shadow: 0 8px 20px rgba(52, 152, 219, 0.3); }
        .result-row { display: flex; justify-content: space-between; margin-bottom: 12px; font-size: 14px; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 8px; }
        .grand-total-val { font-size: 28px; font-weight: 700; text-align: right; display: block; margin-top: 5px; }
        
        /* LOGIN */
        #loginOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #f4f6f8; z-index: 99999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .login-box { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); width: 90%; max-width: 350px; text-align: center; border: 1px solid #e1e4e8; }
        .login-btn { width: 100%; padding: 15px; margin-top: 20px; background: #3498db; color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; }
        .logout-btn { background: #e74c3c; color: white; padding: 6px 12px; border-radius: 6px; font-size: 11px; cursor: pointer; border: none; font-weight: bold; }
    </style>
</head>
<body>

<div id="loginOverlay">
    <div class="login-box">
        <h2 style="margin-bottom: 10px;">ðŸ”’ GÄ°RÄ°Åž / CONNEXION</h2>
        <p style="color:#666; margin-bottom: 20px; font-size:14px;">Åžifrenizi giriniz / Mot de passe</p>
        <input type="password" id="passwordInput" placeholder="****" style="text-align: center; letter-spacing: 5px;">
        <button class="login-btn" onclick="attemptLogin()">GÄ°RÄ°Åž / ENTRER</button>
        <p id="loginError" style="color:red; margin-top:10px; display:none;">HatalÄ± Åžifre! / Incorrect!</p>
    </div>
</div>

<div class="container" id="mainApp" style="display:none;">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2 style="margin:0;">PROJET MASTER</h2>
        <button class="logout-btn" onclick="logout()">Ã‡Ä±kÄ±ÅŸ / DÃ©co</button>
    </div>
    
    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('ALL', this)">HEPSÄ°<br>TOUS</button>
        <button class="tab-btn" onclick="switchTab('ROUTE', this)">YOL<br>ROUTE</button>
        <button class="tab-btn" onclick="switchTab('OA', this)">SANAT<br>OA</button>
        <button class="tab-btn" onclick="switchTab('TUNNEL', this)">TÃœNEL<br>TUNNEL</button>
    </div>

    <label>Ä°ÅŸ Kalemi SeÃ§ / SÃ©lectionnez l'article:</label>
    
    <div class="search-wrapper">
        <input type="text" id="searchInput" placeholder="Ã–rn: BÃ©ton, KazÄ±, Buse..." onkeyup="filterItems()" onfocus="this.select(); toggleDropdown(true);" autocomplete="off">
        <div class="arrow-btn" onclick="toggleDropdown('toggle')">â–¼</div>
        <div id="customResults" class="custom-results"></div>
    </div>

    <div id="selectedCard" class="selected-card">
        <h3><span id="selCode">CODE</span> <span class="badge-unit" id="selUnit">BÄ°RÄ°M</span></h3>
        <p id="selName" style="margin: 10px 0; color: #333; font-weight: 600; line-height: 1.4;">Ä°ÅŸ TanÄ±mÄ±</p>
        <div class="price-tag">
            Birim Fiyat / P.U: <br>
            <b><span id="selPriceDZD">0</span> DZD</b> + <b><span id="selPriceEUR">0</span> â‚¬</b>
        </div>
    </div>

    <div id="calcArea" style="opacity: 0.5; pointer-events: none; margin-top: 20px;">
        <label>Euro Kuru / Taux Euro:</label>
        <input type="number" style="width:100%; margin-bottom:10px;" id="exchangeRate" value="102.3" step="0.1" oninput="calculate()">

        <label>Miktar / QuantitÃ©:</label>
        <input type="number" style="width:100%;" id="quantity" placeholder="Miktar giriniz..." oninput="calculate()">

        <div class="result-box" id="resultBox">
            <div class="result-row">
                <span>Montant DZD:</span> <span id="resDZD">0 DZD</span>
            </div>
            <div class="result-row">
                <span>Montant EUR:</span> <span id="resEUR">0 â‚¬</span>
            </div>
            <div style="margin-top: 20px; text-align: center;">
                <span class="grand-total-label">TOPLAM / TOTAL</span>
                <span class="grand-total-val" id="resGrandTotal">0,00 DZD</span>
            </div>
        </div>
    </div>
</div>

<script>
    const APP_PASSWORD = "1907";
    let currentFilter = 'ALL'; 
    let selectedItem = null;

    function attemptLogin() {
        const input = document.getElementById("passwordInput").value;
        if(input.trim() === APP_PASSWORD) {
            localStorage.setItem("isLoggedIn", "true");
            showApp();
        } else {
            document.getElementById("loginError").style.display = "block";
        }
    }

    document.getElementById("passwordInput").addEventListener("keypress", function(e) {
        if (e.key === "Enter") attemptLogin();
    });

    function showApp() {
        document.getElementById("loginOverlay").style.display = "none";
        document.getElementById("mainApp").style.display = "block";
    }

    function logout() {
        localStorage.removeItem("isLoggedIn");
        location.reload();
    }

    window.onload = function() {
        if(localStorage.getItem("isLoggedIn") === "true") {
            showApp();
        }
    }

    function switchTab(tab, btn) {
        currentFilter = tab;
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        document.getElementById("searchInput").value = "";
        document.getElementById("customResults").style.display = "none";
        document.getElementById("selectedCard").style.display = "none";
        document.getElementById("calcArea").style.opacity = "0.5";
        document.getElementById("resultBox").style.display = "none";
    }

    // --- TAM VE DOÄžRU TÃœRKÃ‡E LÄ°STE (CSV'DEN) ---
    const database = [
        // ROUTE
        {l:"ROUTE", c:"A1", n:"Installation chantier / Åžantiye Kurulumu", u:"Ft", d:1041277260.86, e:4972851.8},
        {l:"ROUTE", c:"A2.1", n:"Laboratoire / Åžantiye LaboratuvarÄ±", u:"Ft", d:41644039.15, e:570439.5},
        {l:"ROUTE", c:"A2.2", n:"ContrÃ´le externe / DÄ±ÅŸ Kontrol (MÃ¼ÅŸavir)", u:"Ft", d:33983960.76, e:400938.8},
        {l:"ROUTE", c:"A3.1", n:"Ã‰tudes exÃ©cution / Uygulama Projeleri", u:"Ft", d:212842500, e:2025000},
        {l:"ROUTE", c:"A3.2", n:"ContrÃ´le Ã©tudes / Proje KontrolÃ¼", u:"Ft", d:45999996.83, e:449657.9},
        {l:"ROUTE", c:"A3.3", n:"Dossier rÃ©colement / As-Built Projeler", u:"Ft", d:33568500, e:405000},
        {l:"ROUTE", c:"A3.4", n:"MÃ©thodes / Metodoloji", u:"Ft", d:7500069.87, e:73313.1},
        {l:"ROUTE", c:"A3.5", n:"GÃ©otechnique / Jeoteknik EtÃ¼tler", u:"Ft", d:40209555.68, e:388958.4},
        {l:"ROUTE", c:"A4.1", n:"SÃ©curitÃ© passive / Pasif GÃ¼venlik", u:"Ft", d:200000000, e:0},
        {l:"ROUTE", c:"A4.2", n:"SÃ©curitÃ© active / Aktif GÃ¼venlik", u:"Ft", d:400000000, e:0},
        {l:"ROUTE", c:"A5", n:"Panneau chantier / Proje TabelasÄ±", u:"U", d:1775000, e:0},
        {l:"ROUTE", c:"B1.1", n:"DÃ©broussaillage / Saha TemizliÄŸi & SÄ±yÄ±rma", u:"Ha", d:619820.41, e:2543.3},
        {l:"ROUTE", c:"B1.2", n:"Abattage arbres / AÄŸaÃ§ Kesimi", u:"U", d:1600, e:0},
        {l:"ROUTE", c:"B1.3", n:"DÃ©pose mÃ©tal / Metal YapÄ± SÃ¶kÃ¼mÃ¼", u:"Tonne", d:944.25, e:2.5},
        {l:"ROUTE", c:"B2.1", n:"DÃ©molition divers / YapÄ± YÄ±kÄ±mÄ±", u:"m3", d:1335.05, e:6.5},
        {l:"ROUTE", c:"B2.2", n:"DÃ©molition bÃ©ton / Betonarme YÄ±kÄ±mÄ±", u:"m3", d:1620.22, e:8.6},
        {l:"ROUTE", c:"B2.3", n:"DÃ©molition chaussÃ©e / Asfalt SÃ¶kÃ¼mÃ¼", u:"m3", d:207.7, e:1},
        {l:"ROUTE", c:"B3.1", n:"Rabotage <10cm / Frezeleme (Ä°nce)", u:"m2", d:88.85, e:0.5},
        {l:"ROUTE", c:"B3.2", n:"Rabotage 10-20cm / Frezeleme (KalÄ±n)", u:"m2", d:98.62, e:0.6},
        {l:"ROUTE", c:"B4", n:"Scarification / Yol KazÄ±ma", u:"m2", d:28.16, e:0.8},
        {l:"ROUTE", c:"C1.1", n:"DÃ©capage / Bitkisel Toprak SÄ±yÄ±rma", u:"m3", d:128.62, e:0.6},
        {l:"ROUTE", c:"C1.2", n:"Reprise stock / Stoktan Dolgu", u:"m3", d:179.08, e:0.4},
        {l:"ROUTE", c:"C2.2", n:"Purges / ZayÄ±f Zemin KazÄ±sÄ±", u:"m3", d:2200, e:0},
        {l:"ROUTE", c:"C3.1", n:"DÃ©blai meuble > Remblai / YumuÅŸak KazÄ± (Dolgu)", u:"m3", d:257.24, e:1.2},
        {l:"ROUTE", c:"C3.2", n:"DÃ©blai semi-dur > Remblai / KÃ¼skÃ¼lÃ¼k KazÄ± (Dolgu)", u:"m3", d:386.32, e:1.6},
        {l:"ROUTE", c:"C3.3", n:"DÃ©blai rocheux > Remblai / Kaya KazÄ±sÄ± (Dolgu)", u:"m3", d:1308.96, e:4.8},
        {l:"ROUTE", c:"C4.1", n:"DÃ©blai meuble > DÃ©pÃ´t / YumuÅŸak KazÄ± (Depo)", u:"m3", d:148.16, e:0.8},
        {l:"ROUTE", c:"C4.2", n:"DÃ©blai semi-dur > DÃ©pÃ´t / KÃ¼skÃ¼lÃ¼k KazÄ± (Depo)", u:"m3", d:307.7, e:1},
        {l:"ROUTE", c:"C4.3", n:"DÃ©blai rocheux > DÃ©pÃ´t / Kaya KazÄ±sÄ± (Depo)", u:"m3", d:893.1, e:3},
        {l:"ROUTE", c:"C5.1", n:"Remblai emprunt / Ariyet Dolgusu", u:"m3", d:555.63, e:1.9},
        {l:"ROUTE", c:"C6.1", n:"Assise drainante / Drenaj TabakasÄ±", u:"m3", d:1166.55, e:1.5},
        {l:"ROUTE", c:"C7.1", n:"GÃ©otextile renfort / GÃ¼Ã§lendirme Geotekstili", u:"m2", d:290.8, e:4},
        {l:"ROUTE", c:"C7.2", n:"GÃ©otextile anti-contam / AyÄ±rÄ±cÄ± Geotekstil", u:"m2", d:258.27, e:5.1},
        {l:"ROUTE", c:"C7.3", n:"GÃ©ogrille / Geogrid", u:"m2", d:418.04, e:5.2},
        {l:"ROUTE", c:"C8.1", n:"Arrondi talus / Åžev Yuvarlama", u:"ml", d:317.01, e:1.3},
        {l:"ROUTE", c:"C9.1", n:"Couche forme / Form TabakasÄ±", u:"m3", d:1346.55, e:1.5},
        {l:"ROUTE", c:"C10.1", n:"Transport <30km / Nakliye", u:"M3xKM", d:12.5, e:0},
        {l:"ROUTE", c:"C10.2", n:"Transport >30km / Nakliye", u:"M3xKM", d:11, e:0},
        {l:"ROUTE", c:"D1.1", n:"FossÃ© A / KaplamasÄ±z Hendek A", u:"ml", d:495.86, e:1.8},
        {l:"ROUTE", c:"D1.2", n:"FossÃ© B / KaplamasÄ±z Hendek B", u:"ml", d:594.94, e:2.2},
        {l:"ROUTE", c:"D1.3", n:"FossÃ© C / KaplamasÄ±z Hendek C", u:"ml", d:897.18, e:3.4},
        {l:"ROUTE", c:"D1.4", n:"VÃ©gÃ©talisation / Hendek Ã‡imleme", u:"ml", d:874.94, e:2.2},
        {l:"ROUTE", c:"D2.1", n:"BÃ©tonnage A / Beton Hendek A", u:"ml", d:4448.37, e:18.1},
        {l:"ROUTE", c:"D2.2", n:"BÃ©tonnage B / Beton Hendek B", u:"ml", d:5662.5, e:25},
        {l:"ROUTE", c:"D2.3", n:"BÃ©tonnage C / Beton Hendek C", u:"ml", d:6316.17, e:32.1},
        {l:"ROUTE", c:"D3.1", n:"Cunette vÃ©gÃ©talisÃ©e / Ã‡im KaplÄ± KÃ¼nvet", u:"ml", d:3402.4, e:12},
        {l:"ROUTE", c:"D3.2", n:"Cunette bÃ©ton / Beton KÃ¼nvet", u:"ml", d:4304.81, e:15.3},
        {l:"ROUTE", c:"D3.3", n:"Cunette symÃ©trique / Simetrik KÃ¼nvet", u:"ml", d:4829.18, e:13.4},
        {l:"ROUTE", c:"D4.1", n:"Descente A / Ä°niÅŸ KanalÄ± A", u:"ml", d:2912.86, e:11.8},
        {l:"ROUTE", c:"D4.2", n:"Descente B / Ä°niÅŸ KanalÄ± B", u:"ml", d:3357.57, e:14.1},
        {l:"ROUTE", c:"D4.3", n:"Descente C / Ä°niÅŸ KanalÄ± C", u:"ml", d:3634.81, e:15.3},
        {l:"ROUTE", c:"D4.4", n:"Descente D / Ä°niÅŸ KanalÄ± D", u:"ml", d:4119.98, e:17.4},
        {l:"ROUTE", c:"D5.1", n:"Descente Tuile A / Kiremit Kanal A", u:"ml", d:2200, e:0},
        {l:"ROUTE", c:"D5.2", n:"Descente Tuile B / Kiremit Kanal B", u:"ml", d:3520, e:0},
        {l:"ROUTE", c:"D5.3", n:"Descente Tuile C / Kiremit Kanal C", u:"ml", d:4200, e:0},
        {l:"ROUTE", c:"D6.1", n:"Caniveau U 30x40 / U Kanal", u:"ml", d:4800, e:0},
        {l:"ROUTE", c:"D6.2", n:"Caniveau U 40x50 / U Kanal", u:"ml", d:5800, e:0},
        {l:"ROUTE", c:"D6.3", n:"Caniveau U 45x55 / U Kanal", u:"ml", d:6300, e:0},
        {l:"ROUTE", c:"D7.1", n:"Caniveau fente 300 / YarÄ±k Kanal", u:"ml", d:22200, e:0},
        {l:"ROUTE", c:"D7.2", n:"Caniveau fente 400 / YarÄ±k Kanal", u:"ml", d:26600, e:0},
        {l:"ROUTE", c:"D7.3", n:"Caniveau fente 500 / YarÄ±k Kanal", u:"ml", d:29300, e:0},
        {l:"ROUTE", c:"D7.4", n:"Renforcement / Kanal GÃ¼Ã§lendirme", u:"ml", d:11191.83, e:7.9},
        {l:"ROUTE", c:"D8.1", n:"Demi-buse 300 / YarÄ±m BÃ¼z", u:"ml", d:4400, e:0},
        {l:"ROUTE", c:"D8.2", n:"Demi-buse 400 / YarÄ±m BÃ¼z", u:"ml", d:5700, e:0},
        {l:"ROUTE", c:"D8.3", n:"Demi-buse 500 / YarÄ±m BÃ¼z", u:"ml", d:7800, e:0},
        {l:"ROUTE", c:"D9.1", n:"TranchÃ©e <2m / Hendek KazÄ±sÄ±", u:"m3", d:217.93, e:0.9},
        {l:"ROUTE", c:"D9.2", n:"TranchÃ©e 2-4m / Hendek KazÄ±sÄ±", u:"m3", d:277.24, e:1.2},
        {l:"ROUTE", c:"D9.3", n:"TranchÃ©e 4-6m / Hendek KazÄ±sÄ±", u:"m3", d:326.55, e:1.5},
        {l:"ROUTE", c:"D9.4", n:"PV Roche / Kaya FarkÄ±", u:"m3", d:1500, e:0},
        {l:"ROUTE", c:"D10.1", n:"Lit sable / Kum Yataklama", u:"m3", d:1455.51, e:6.3},
        {l:"ROUTE", c:"D10.2", n:"Lit bÃ©ton / Beton Yataklama", u:"m3", d:5962.17, e:12.1},
        {l:"ROUTE", c:"D11.1", n:"Enrobage grave / DoÄŸal GÃ¶mlekleme", u:"m3", d:1437.35, e:5.5},
        {l:"ROUTE", c:"D11.2", n:"Enrobage bÃ©ton / Beton GÃ¶mlekleme", u:"m3", d:5593.89, e:15.7},
        {l:"ROUTE", c:"D11.3", n:"Enrobage drainant / Drenaj GÃ¶mlekleme", u:"m3", d:1739.65, e:4.5},
        {l:"ROUTE", c:"D12.1", n:"Tuyau 400mm / BA Boru", u:"ml", d:7769.31, e:0.3},
        {l:"ROUTE", c:"D12.2", n:"Tuyau 600mm / BA Boru", u:"ml", d:9369.31, e:0.3},
        {l:"ROUTE", c:"D13.1", n:"Buse 800mm / BÃ¼z", u:"ml", d:15498.73, e:4.9},
        {l:"ROUTE", c:"D13.2", n:"Buse 1000mm / BÃ¼z", u:"ml", d:21631.72, e:3.6},
        {l:"ROUTE", c:"D13.3", n:"Buse 1200mm / BÃ¼z", u:"ml", d:36375.97, e:6.1},
        {l:"ROUTE", c:"D13.4", n:"Buse 1500mm / BÃ¼z", u:"ml", d:50775.97, e:6.1},
        {l:"ROUTE", c:"D14.1", n:"Collecteur 150 / Drenaj KollektÃ¶rÃ¼", u:"ml", d:2700, e:0},
        {l:"ROUTE", c:"D17.1", n:"Tuyau PEHD 75mm", u:"ml", d:1236, e:0},
        {l:"ROUTE", c:"D17.2", n:"Tuyau PEHD 90mm", u:"ml", d:1500, e:0},
        {l:"ROUTE", c:"D18.1", n:"Chambre K1C / Menhol K1C", u:"U", d:112000, e:0},
        {l:"ROUTE", c:"D18.2", n:"Chambre K2C / Menhol K2C", u:"U", d:125000, e:0},
        {l:"ROUTE", c:"D19.1", n:"Regard 1000mm / Muayene BacasÄ±", u:"U", d:120000, e:0},
        {l:"ROUTE", c:"D20.1", n:"Puisard / Rogar", u:"U", d:150000, e:0},
        {l:"ROUTE", c:"D20.2", n:"Puisard 1500x1300 / Rogar", u:"U", d:174000, e:0},
        {l:"ROUTE", c:"D20.3", n:"Puisard 1500x1500 / Rogar", u:"U", d:188000, e:0},
        {l:"ROUTE", c:"D20.4", n:"Puisard 1500x1800 / Rogar", u:"U", d:215000, e:0},
        {l:"ROUTE", c:"D20.5", n:"Puisard 1500x2000 / Rogar", u:"U", d:220000, e:0},
        {l:"ROUTE", c:"D20.6", n:"Puisard 1500x2500 / Rogar", u:"U", d:260000, e:0},
        {l:"ROUTE", c:"D21.1", n:"Grille 700x700 / Izgara", u:"U", d:32000, e:0},
        {l:"ROUTE", c:"D21.2", n:"Grille 250x400 / Izgara", u:"U", d:26826.09, e:1.7},
        {l:"ROUTE", c:"D21.3", n:"Caillebotis 1x1m / Izgara", u:"U", d:5400, e:0},
        {l:"ROUTE", c:"D21.4", n:"Caillebotis 1x2m / Izgara", u:"U", d:9200, e:0},
        {l:"ROUTE", c:"D22.1", n:"TÃªte buse 600 / BÃ¼z AÄŸzÄ±", u:"U", d:60925.34, e:154.2},
        {l:"ROUTE", c:"D22.2", n:"TÃªte buse 800 / BÃ¼z AÄŸzÄ±", u:"U", d:68921.05, e:186.5},
        {l:"ROUTE", c:"D22.3", n:"TÃªte buse 1000 / BÃ¼z AÄŸzÄ±", u:"U", d:76992.73, e:224.9},
        {l:"ROUTE", c:"D22.4", n:"TÃªte buse 1200 / BÃ¼z AÄŸzÄ±", u:"U", d:90558.06, e:287.8},
        {l:"ROUTE", c:"D22.5", n:"TÃªte buse 1500 / BÃ¼z AÄŸzÄ±", u:"U", d:125386.97, e:436.1},
        {l:"ROUTE", c:"D23.1", n:"Bourrelet / Asfalt BordÃ¼r", u:"ml", d:3000, e:0},
        {l:"ROUTE", c:"D24.1", n:"Enrochement A / TaÅŸ Tahkimat A", u:"m3", d:1879.3, e:9},
        {l:"ROUTE", c:"D24.2", n:"Enrochement B / TaÅŸ Tahkimat B", u:"m3", d:1879.3, e:9},
        {l:"ROUTE", c:"D24.3", n:"Enrochement C / TaÅŸ Tahkimat C", u:"m3", d:1879.3, e:9},
        {l:"ROUTE", c:"D25.1", n:"Enrochement liÃ© / HarÃ§lÄ± TaÅŸ", u:"m3", d:2042.98, e:7.4},
        {l:"ROUTE", c:"D26.1", n:"Barbacane / Barbakan", u:"ml", d:1700, e:0},
        {l:"ROUTE", c:"D27.1", n:"BÃ©ton propretÃ© / Grobeton", u:"m3", d:178.16, e:0.8},
        {l:"ROUTE", c:"D27.2", n:"BÃ©ton ouvrages / YapÄ± Betonu", u:"m3", d:9553.28, e:46.4},
        {l:"ROUTE", c:"D27.3", n:"Coffrage / KalÄ±p", u:"m2", d:920.22, e:8.6},
        {l:"ROUTE", c:"D27.4", n:"Ferraillage / Demir DonatÄ±", u:"Kg", d:65.08, e:0.4},
        {l:"ROUTE", c:"E1.1", n:"Grave GNT / Plentmiks (PMT)", u:"m3", d:1922.64, e:3.2},
        {l:"ROUTE", c:"E2.1", n:"Grave Bitume / BitÃ¼mlÃ¼ Temel", u:"Tonne", d:3390.32, e:21.6},
        {l:"ROUTE", c:"E2.2", n:"EnrobÃ©s EME 2 / Modifiye Asfalt", u:"Tonne", d:4782.15, e:29.5},
        {l:"ROUTE", c:"E3.1", n:"Couche BB / AÅŸÄ±nma (BB)", u:"Tonne", d:4337.9, e:27},
        {l:"ROUTE", c:"E3.2", n:"Couche BBM / AÅŸÄ±nma (BBM)", u:"Tonne", d:4650.19, e:34.7},
        {l:"ROUTE", c:"E3.3", n:"Couche BBME / AÅŸÄ±nma (BBME)", u:"Tonne", d:4670.65, e:34.5},
        {l:"ROUTE", c:"E4.1", n:"ImprÃ©gnation / Emprime", u:"m2", d:95, e:0},
        {l:"ROUTE", c:"E4.2", n:"Accrochage / YapÄ±ÅŸtÄ±rÄ±cÄ±", u:"m2", d:70, e:0},
        {l:"ROUTE", c:"E5.1", n:"Bicouche / Sathi Kaplama", u:"m2", d:540, e:0},
        {l:"ROUTE", c:"E6.1", n:"Bordure A2 / BordÃ¼r A2", u:"ml", d:2000, e:0},
        {l:"ROUTE", c:"F1.1", n:"Hachures / TaralÄ± Alan", u:"m2", d:680, e:0},
        {l:"ROUTE", c:"F1.2", n:"Bande 100mm / Ã‡izgi", u:"ml", d:70, e:0},
        {l:"ROUTE", c:"F1.3", n:"Bande 150mm / Ã‡izgi", u:"ml", d:145, e:0},
        {l:"ROUTE", c:"F1.5", n:"Bande 375mm / Ã‡izgi", u:"ml", d:340, e:0},
        {l:"ROUTE", c:"F1.8", n:"FlÃ¨che / Ok Ä°ÅŸareti", u:"U", d:800, e:0},
        {l:"ROUTE", c:"F2.1", n:"Bande prÃ©fa / HazÄ±r Ã‡izgi", u:"ml", d:800, e:0},
        {l:"ROUTE", c:"G1.1", n:"Panneau A/AB / Levha", u:"U", d:52000, e:0},
        {l:"ROUTE", c:"G1.3", n:"Panneau Circulaire / Levha", u:"U", d:48600, e:0},
        {l:"ROUTE", c:"G2.1", n:"Panonceau M / M Tipi", u:"m2", d:42000, e:0},
        {l:"ROUTE", c:"G3.1", n:"Panneau Direction / YÃ¶n", u:"m2", d:64000, e:0},
        {l:"ROUTE", c:"G4.1", n:"Balise J1 / Viraj YÃ¶n", u:"U", d:18000, e:0},
        {l:"ROUTE", c:"G5.1", n:"Poteau <50 / Direk", u:"ml", d:9776.59, e:0},
        {l:"ROUTE", c:"G5.7", n:"Semelle / Levha Temeli", u:"m3", d:8020.53, e:38.9},
        {l:"ROUTE", c:"G7.1", n:"RÃ©flecteur / ReflektÃ¶r", u:"U", d:1670, e:0},
        {l:"ROUTE", c:"H1.1", n:"GlissiÃ¨re GS4 / Otokorkuluk", u:"ml", d:1238.45, e:48.5},
        {l:"ROUTE", c:"H2.1", n:"BarriÃ¨re GBA / Beton Bariyer", u:"ml", d:3932.51, e:16.3},
        {l:"ROUTE", c:"I1.1", n:"Fouilles / Temel KazÄ±sÄ±", u:"m3", d:178.16, e:0.8},
        {l:"ROUTE", c:"I1.3", n:"BÃ©ton propretÃ© / Grobeton", u:"m3", d:5919.19, e:4.7},
        {l:"ROUTE", c:"I1.6", n:"BÃ©ton fondation / Temel Betonu", u:"m3", d:8973.98, e:37.4},
        {l:"ROUTE", c:"I2.1", n:"Support HEA 140 / Destek", u:"U", d:9600, e:0},
        {l:"ROUTE", c:"I3.1", n:"Panneau antibruit / GÃ¼rÃ¼ltÃ¼ Paneli", u:"m2", d:88750, e:0},
        {l:"ROUTE", c:"I5.1", n:"Argile compactÃ©e / Kil Dolgu", u:"m3", d:474.48, e:2.4},
        {l:"ROUTE", c:"I5.3", n:"Enrochement / TaÅŸ Dolgu", u:"m3", d:2205.85, e:10.5},
        {l:"ROUTE", c:"I6.1", n:"SÃ©parateur hydro / YaÄŸ AyÄ±rÄ±cÄ±", u:"U", d:4400000, e:0},
        {l:"ROUTE", c:"I8.1", n:"ClÃ´ture / Ã‡it", u:"ml", d:5934.02, e:2.6},
        {l:"ROUTE", c:"I9.1", n:"Plantation arbres / AÄŸaÃ§", u:"m2", d:1545.17, e:0},
        {l:"ROUTE", c:"J1.1", n:"Gabions / Gabion Duvar", u:"m3", d:3034.57, e:24.1},
        {l:"ROUTE", c:"J2.1", n:"BÃ©ton projetÃ© / PÃ¼skÃ¼rtme Beton", u:"m3", d:13478.48, e:122.4},
        {l:"ROUTE", c:"J2.3", n:"Clous / Zemin Ã‡ivisi", u:"U", d:19236.87, e:23.1},
        {l:"ROUTE", c:"J6.1", n:"Drains / Drenaj", u:"ml", d:4700, e:0},
        {l:"ROUTE", c:"J8.1", n:"Ancrages 32mm / Ankraj", u:"ml", d:470.1, e:13},
        {l:"ROUTE", c:"J9", n:"GÃ©otextile alv. / HÃ¼cresel Geotekstil", u:"m2", d:780, e:0},
        {l:"ROUTE", c:"K1.1", n:"CamÃ©ra / Kamera", u:"U", d:412003.51, e:36246.3},
        {l:"ROUTE", c:"NP.11", n:"Poste observation / Kule", u:"U", d:12200000, e:0},
        {l:"ROUTE", c:"NP.26", n:"GÃ©ocomposite / Geokompozit", u:"m2", d:764.73, e:26.64},
        {l:"ROUTE", c:"NP.36", n:"Massif ancrage / Ankraj BloÄŸu", u:"m3", d:3405.85, e:10.5},
        {l:"ROUTE", c:"NP.64", n:"Chambre L5C / Menhol L5C", u:"U", d:348873.07, e:11.02},
        {l:"ROUTE", c:"NP.67", n:"RÃ©seau multitub / Ã‡oklu Boru", u:"ml", d:6113.37, e:16.49},
        {l:"ROUTE", c:"NP.74", n:"Couche forme / Form", u:"m3", d:1950, e:0},
        {l:"ROUTE", c:"NP.14m", n:"InclinomÃ¨tre / Ä°nklinometre", u:"U", d:209998.56, e:2052.8},
        {l:"ROUTE", c:"NP11.14", n:"Sondage / Sondaj", u:"ml", d:18000, e:0},
        {l:"ROUTE", c:"NP11.19", n:"Etude adaptation / GÃ¼zergah DeÄŸiÅŸikliÄŸi", u:"Ft", d:36723806, e:358780},

        // OA
        {l:"OA", c:"OUA.A1", n:"Installation OA / Åžantiye Kurulumu", u:"Ft", d:1010357152, e:4786342},
        {l:"OA", c:"OUA.B1.1", n:"DÃ©blais fouilles / Temel KazÄ±sÄ±", u:"m3", d:178.16, e:0.8},
        {l:"OA", c:"OUA.B2.1", n:"Pieux 1200mm / Fore KazÄ±k", u:"ml", d:5404.19, e:54.7},
        {l:"OA", c:"OUA.B2.2", n:"PV Roche / Kaya FarkÄ±", u:"ml", d:802.06, e:7.8},
        {l:"OA", c:"OUA.B2.7", n:"Essais pieux / YÃ¼kleme Deneyi", u:"U", d:1520000, e:0},
        {l:"OA", c:"OUA.B3.1", n:"Puits <3m / Kuyu", u:"ml", d:124999.6, e:1221.9},
        {l:"OA", c:"OUA.B4.1", n:"Coffrage / KalÄ±p", u:"m2", d:853.21, e:7.3},
        {l:"OA", c:"OUA.B5.1", n:"BÃ©ton propretÃ© / Grobeton", u:"m2", d:723.79, e:2.7},
        {l:"OA", c:"OUA.B5.2.1", n:"BÃ©ton C40 / Beton C40", u:"m3", d:21343.02, e:172.6},
        {l:"OA", c:"OUA.B5.2.6", n:"BÃ©ton C35 / Beton C35", u:"m3", d:12538.45, e:48.5},
        {l:"OA", c:"OUA.B5.2.7", n:"BÃ©ton C27 / Beton C27", u:"m3", d:10736.15, e:49.5},
        {l:"OA", c:"OUA.B6.1", n:"Acier HA / Demir", u:"Tonne", d:67033.93, e:380.9},
        {l:"OA", c:"OUA.B6.2", n:"PrÃ©contrainte / Ã–ngerilme", u:"Tonne", d:55688.54, e:3170.2},
        {l:"OA", c:"OUA.B7.1", n:"Appareil 2100 / Mesnet 2100", u:"U", d:260001.7, e:3812.3},
        {l:"OA", c:"OUA.B7.5", n:"Joint 240mm / Derz", u:"ml", d:9389.7, e:1961},
        {l:"OA", c:"OUA.NP.05", n:"Shock Transmittal / Åžok Ä°letici", u:"U", d:659476.9, e:53097},
        {l:"OA", c:"OUA.NP.06", n:"Isolateur / Sismik Ä°zolatÃ¶r", u:"U", d:134282.6, e:15822.3},
        {l:"OA", c:"OUA.NP.09b", n:"Tirants 75T / Ankraj 75T", u:"ml", d:4310, e:103},
        {l:"OA", c:"OUA.NP08.44", n:"Water Stop / Su BandÄ±", u:"ml", d:2550, e:0},
        {l:"OA", c:"OUA.NP11.04", n:"Joint 800mm / GenleÅŸme Derzi", u:"ml", d:102606, e:9780},

        // TUNNEL
        {l:"TUNNEL", c:"TUN.E1.1", n:"Fondation GNT / Temel GNT", u:"m3", d:1862.41, e:3.3},
        {l:"TUNNEL", c:"TUN.E1.3", n:"EnrobÃ© EME / Modifiye Asfalt", u:"Tonne", d:4812.84, e:29.2},
        {l:"TUNNEL", c:"TUN.E3.5", n:"Portique / Gabari TakÄ±", u:"U", d:309995.6, e:57575.8},
        {l:"TUNNEL", c:"TU.E3.1", n:"Panneau Tunnel / Levha", u:"U", d:11768.62, e:2185},
        {l:"TUNNEL", c:"TUN.A1", n:"Installation / Kurulum", u:"Ft", d:280633538, e:1362331},
        {l:"TUNNEL", c:"TUN.B1", n:"DÃ©blais / TÃ¼nel KazÄ±sÄ±", u:"m3", d:1126.54, e:4.62},
        {l:"TUNNEL", c:"TUN.C1.2", n:"Explosif / PatlatmalÄ± KazÄ±", u:"m3", d:4883.43, e:53.5},
        {l:"TUNNEL", c:"TUN.C2.1", n:"Cintre / Ä°ksa Ã‡eliÄŸi", u:"kg", d:46.55, e:1.5},
        {l:"TUNNEL", c:"TUN.C3.1", n:"Boulons 4m / Kaya Bulonu", u:"U", d:2832.82, e:46.6},
        {l:"TUNNEL", c:"TUN.D2.1", n:"BÃ©ton projetÃ© / PÃ¼skÃ¼rtme", u:"m3", d:13046.21, e:97.3},
        {l:"TUNNEL", c:"TUN.F2.1", n:"Ventilateurs / Fanlar", u:"U", d:459359.8, e:85315.4}
    ];

    function toggleDropdown(state) {
        const resultsDiv = document.getElementById("customResults");
        const currentDisplay = window.getComputedStyle(resultsDiv).display;
        if (state === true || (state === 'toggle' && currentDisplay === "none")) {
            renderAllItems();
            resultsDiv.style.display = "block";
        } else {
            resultsDiv.style.display = "none";
        }
    }

    function renderAllItems() {
        const resultsDiv = document.getElementById("customResults");
        resultsDiv.innerHTML = "";
        let filtered = (currentFilter === 'ALL') ? database : database.filter(i => i.l === currentFilter);
        
        filtered.forEach(item => {
            const div = document.createElement("div");
            div.className = "result-item";
            const parts = item.n.split(" / ");
            let tagHTML = `<span class="tag tag-${item.l.toLowerCase()}">${item.l}</span>`;
            div.innerHTML = `${tagHTML} <strong>${item.c}</strong> ${parts[0]} <br> <span style="color:#007aff;">${parts[1]||""}</span>`;
            div.onclick = function() { selectItem(item); };
            resultsDiv.appendChild(div);
        });
    }

    function filterItems() {
        const filter = document.getElementById("searchInput").value.toLowerCase();
        if (filter.length < 1) { renderAllItems(); return; }
        
        const resultsDiv = document.getElementById("customResults");
        resultsDiv.innerHTML = "";
        const filtered = database.filter(item => {
            const match = item.c.toLowerCase().includes(filter) || item.n.toLowerCase().includes(filter);
            return match && (currentFilter === 'ALL' || item.l === currentFilter);
        });
        
        filtered.forEach(item => {
            const div = document.createElement("div");
            div.className = "result-item";
            const parts = item.n.split(" / ");
            let tagHTML = `<span class="tag tag-${item.l.toLowerCase()}">${item.l}</span>`;
            div.innerHTML = `${tagHTML} <strong>${item.c}</strong> ${parts[0]} <br> <span style="color:#007aff;">${parts[1]||""}</span>`;
            div.onclick = function() { selectItem(item); };
            resultsDiv.appendChild(div);
        });
        resultsDiv.style.display = "block";
    }

    function selectItem(item) {
        selectedItem = item;
        document.getElementById("searchInput").value = item.c + " - " + item.n.split(" / ")[0];
        document.getElementById("customResults").style.display = "none";
        
        document.getElementById("selCode").innerText = item.c;
        document.getElementById("selUnit").innerText = item.u;
        document.getElementById("selName").innerText = item.n;
        document.getElementById("selPriceDZD").innerText = item.d.toLocaleString('tr-TR', {minimumFractionDigits: 2});
        document.getElementById("selPriceEUR").innerText = item.e.toLocaleString('tr-TR', {minimumFractionDigits: 2});

        document.getElementById("selectedCard").style.display = "block";
        document.getElementById("calcArea").style.opacity = "1";
        document.getElementById("calcArea").style.pointerEvents = "auto";
        document.getElementById("quantity").value = "";
        document.getElementById("resultBox").style.display = "none";
        document.getElementById("quantity").focus();
    }

    function calculate() {
        if (!selectedItem) return;
        const qty = parseFloat(document.getElementById("quantity").value);
        const rate = parseFloat(document.getElementById("exchangeRate").value);

        if (qty > 0) {
            const totalDZD = qty * selectedItem.d;
            const totalEUR = qty * selectedItem.e;
            const grandTotal = totalDZD + (totalEUR * rate);

            document.getElementById("resDZD").innerText = totalDZD.toLocaleString('tr-TR', {minimumFractionDigits: 2}) + " DZD";
            document.getElementById("resEUR").innerText = totalEUR.toLocaleString('tr-TR', {minimumFractionDigits: 2}) + " â‚¬";
            document.getElementById("resGrandTotal").innerText = grandTotal.toLocaleString('tr-TR', {minimumFractionDigits: 2}) + " DZD";
            document.getElementById("resultBox").style.display = "block";
        } else {
            document.getElementById("resultBox").style.display = "none";
        }
    }

    document.addEventListener('click', function(event) {
        if (!event.target.closest('.search-wrapper')) {
            document.getElementById("customResults").style.display = "none";
        }
    });
</script>

</body>
</html>
